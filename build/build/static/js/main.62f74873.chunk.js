(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,n){},71:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var s,r=n(7),c=n.n(r),a=n(32),i=n.n(a),u=(n(39),n(1)),o=n(34),d=n(33),l=n.n(d),j=(n(71),"".concat(window.location.protocol,"//").concat(window.location.host)),b=new Audio("".concat(j,"/ping.m4a")),h=function(e,t){return{handle:function(t){return function(e,t,n){var s=e.state,r=e.setState;switch(n.type){case"full_state":var c=JSON.parse(n.session);r(c);var a="".concat(j,"/?sessionId=").concat(c.id);window.history.pushState({path:a},"",a);break;case"time_start":r(Object(u.a)(Object(u.a)({},s),{},{status:n.status,currentTime:n.currentTime,currentUser:n.currentUser}));break;case"time_end":r(Object(u.a)(Object(u.a)({},s),{},{status:n.status,currentTime:n.currentTime,currentUser:n.currentUser})),document.querySelector("#playSound").checked&&b.play();break;case"time_pause":case"time_resume":r(Object(u.a)(Object(u.a)({},s),{},{status:n.status,currentTime:n.currentTime}));break;case"time":r(Object(u.a)(Object(u.a)({},s),{},{currentTime:n.currentTime}));break;case"new_user":case"remove_user":r(Object(u.a)(Object(u.a)({},s),{},{users:n.users}));break;case"set_round_length":r(Object(u.a)(Object(u.a)({},s),{},{roundLength:n.roundLength}));break;case"toggle_skip_user":r(Object(u.a)(Object(u.a)({},s),{},{users:n.users,currentTime:n.currentTime,currentUser:n.currentUser}));break;default:return}}(e,0,t)}}},m=n(0),p=function(e){var t=e.addNewUser,n=function(e){var n=document.querySelector("#newUserName");n.value&&t(n.value),n.value=""};return Object(m.jsxs)("div",{className:"settings__newUserForm",children:[Object(m.jsx)("label",{htmlFor:"newUserName",children:"Add a user:"})," ",Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"text",placeholder:"Username",name:"newUserName",maxLength:"24",onKeyPress:function(e){"Enter"===e.key&&n()},id:"newUserName"}),Object(m.jsx)("button",{onClick:n,children:" Add "})]})},O=function(e){var t=e.roundLength,n=e.sendData;return Object(m.jsxs)("div",{className:"app__settings__inner",children:[Object(m.jsx)("label",{htmlFor:"roundLengthInput",children:"Round length in minutes:"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"number",placeholder:t/1e3||"",onChange:function(e){+e.target.value>720&&(e.target.value=720),+e.target.value<.05&&(e.target.value=.05)},name:"roundLengthInput",id:"roundLengthInput"}),Object(m.jsx)("button",{onClick:function(){var e=document.querySelector("#roundLengthInput"),t=+e.value;e.value="","number"===typeof t&&n({type:"set_round_length",roundLength:t})},children:"Set"}),Object(m.jsxs)("p",{children:["Play Sound: ",Object(m.jsx)("input",{type:"checkbox",id:"playSound"})]})]})},_=function(e){var t=Math.floor(e/6e4),n=e%6e4/1e3;return"".concat(t?"".concat(t,":"):"").concat(n<10?"0".concat(n):n)},g=function(e){var t=e.user,n=e.sendData,s=e.currentUser,r=e.time;return Object(m.jsxs)("li",{className:"userList__entry",children:[Object(m.jsxs)("div",{className:"userList__left",children:[Object(m.jsx)("input",{type:"checkbox",checked:!t.skip,onChange:function(e){n({type:"toggle_skip_user",userId:t.id})}}),(null===s||void 0===s?void 0:s.id)!==t.id?Object(m.jsx)("p",{children:t.name}):Object(m.jsx)("p",{className:"userList__name userList__name--currentUser",children:t.name})]}),Object(m.jsxs)("div",{className:"userList__right",children:[s.id===t.id?Object(m.jsxs)("p",{className:"userList__time",children:[" ",r," "]}):"",Object(m.jsx)("button",{className:"userList__removeUser",onClick:function(e){return n({type:"remove_user",userId:t.id})},children:"X"})]})]})},x=new URLSearchParams(window.location.search),f=l()(),v=!0,y=function(e){v=!v,e.target.textContent=v?"Hide settings":"Show Settings",document.querySelector(".app__settings").classList.toggle("hidden")};f.emit("handshake",{sessionId:x.get("sessionId")||"new"});var k=function(){var e,t=Object(r.useState)({}),n=Object(o.a)(t,2),c=n[0],a=n[1],i=function(e){f.emit("data",Object(u.a)(Object(u.a)({},e),{},{sessionId:c.id}))};return Object(r.useEffect)((function(){s=h({state:c,setState:a})}),[c]),Object(r.useEffect)((function(){f.on("data",(function(e){s.handle(e)}))}),[]),Object(m.jsxs)("div",{className:"app",children:[Object(m.jsxs)("header",{className:"app__header",children:[Object(m.jsx)("h1",{className:"header__mob",children:"MOB"}),Object(m.jsx)("h1",{children:"TIMER"})]}),Object(m.jsxs)("div",{className:"app__main",children:[Object(m.jsx)("button",{className:"settings__showhide",onClick:y,children:"Hide Settings"}),Object(m.jsxs)("div",{className:"app__settings",children:[Object(m.jsx)(O,{roundLength:(c.roundLength/60).toString(),sendData:i}),Object(m.jsx)(p,{addNewUser:function(e){return i({type:"new_user",name:e})}})]}),Object(m.jsxs)("div",{className:"app__controls",children:[Object(m.jsx)("button",{onClick:function(){return i({type:"time",action:"start"})},children:"Start timer"}),Object(m.jsx)("button",{enabled:("stopped"!==c.status).toString(),onClick:function(e){"running"===c.status&&(i({type:"time",action:"pause"}),e.target.textContent="Resume"),"paused"===c.status&&(i({type:"time",action:"resume"}),e.target.textContent="Pause")},children:"Pause"})]}),Object(m.jsx)("ul",{className:"app__userList",children:(null===(e=c.users)||void 0===e?void 0:e.length)?c.users.map((function(e,t){return Object(m.jsx)(g,{sendData:i,user:e,currentUser:c.currentUser,time:_(c.currentTime)},t)})):Object(m.jsx)("p",{className:"userList__nousers",children:"Add users to begin!"})})]})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),s(e),r(e),c(e),a(e)}))};i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(k,{})}),document.getElementById("root")),w()}},[[73,1,2]]]);
//# sourceMappingURL=main.62f74873.chunk.js.map